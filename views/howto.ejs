<% include partials/header %>
<% var i = 1; %>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
<script type = 'text/javascript'>
  var answer =[];
  answer[0] = "";
  answer[1] = "5";
</script>



<div class = "container">
  
<h1 class="text-center title">How to Quest!</h1>
    
    <script type = "text/javascript">
        var stepnums = 2;
        var idq = "howto";
        var qcat = "howto";

    </script>
            
            <div class="row">
                  <ul class="list-group">
                    <li class="list-group-item clue"><h3><%= 1 %>. What is a Quest?</h3></li>
                    <li class="list-group-item link"><div id="showLink0"><img src="/images/HowTo.png" style="display:block; max-width:100%; max-height:100%; padding-right: 20px; padding-top: 15px; object-fit: contain; overflow: hidden; margin:auto;"></div></li>
                    <li class="list-group-item answerbox">
                      <form>
                        <div class="input-group">
                            <input type="text" class="form-control" id="userAnswer0" placeholder="Answer">
                            <span class="input-group-btn">
                              <button type="button" onclick="showStep()" class="btn qualluViolet"/><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>
                            </span>
                        </div><!-- /input-group -->
                      </form>
                    </li>
                  </ul>
            </div>   


              <div class="row" id="nextStep1" style="display:none;">
                        <ul class="list-group">
                          <li class="list-group-item clue"><h3><%= 2 %>. How many pirates have red hats?</h3></li>
                          <li class="list-group-item link"><div id="showLink1"><img src="/images/howMany.png" style="display:block; max-width:100%; max-height:100%; object-fit: contain; overflow: hidden; margin:auto;"></div></li>
                          <li class="list-group-item answerbox grey">
                            <form>
                              <div class="input-group">
                                <input type="text" class="form-control" id="userAnswer1" placeholder="Answer">
                                <span class="input-group-btn">
                                  <button type="button" onclick="showStep()" class="btn qualluViolet"/><span class="glyphicon glyphicon-ok" aria-hidden="true"></span></button>
                                </span>
                              </div><!-- /input-group -->
                            </form>
                          </li>
                        </ul>
                 
              </div>


<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header" style="border-bottom: 0px solid #FFFFFF;">
        <h3 class = "congrats">You have completed your first Quest!</h3>
      </div>
      <div class="modal-body">
        <img src="http://i1028.photobucket.com/albums/y342/nickkt2/chest_zpse6ofnh8h.png" alt="Quallu" class="chest">
      </div>
      <div class="modal-footer" style="border-top: 0px solid #FFFFFF; text-align: center; margin-left: auto; margin-right: auto;">
        <button class="btn qualluBlue" style="width:190px; margin-bottom: 20px" onclick="markQompleted()">Explore More Quests!</button>
      </div>
    </div>
  </div>
</div>

<% function convertToSlug(Text){ 
    return Text
        .toLowerCase()
        .replace(/ /g,'-')
        .replace(/[^\w-]+/g,'')
        ;
} %>
<script type = 'text/javascript'>
var count = 1;
var id = "userAnswer" + (count-1);
function showStep() {
  if((answer[count-1]).toLowerCase() == document.getElementById(id).value.toLowerCase() && count == stepnums){
    $('#myModal').modal('show');
    document.getElementById('userAnswer' + (count-1)).style.background = "#3FA9F5";
    
  }
  else if((answer[count-1]).toLowerCase() == document.getElementById(id).value.toLowerCase()){
    document.getElementById('nextStep' + count).style.display = "block";
    document.getElementById('userAnswer' + (count-1)).style.background = "#3FA9F5";
    count++;
    id = "userAnswer" + (count-1);
    $("html, body").animate({ scrollTop: $(document).height() }, 1500);
  }
  else
    document.getElementById('userAnswer' + (count-1)).style.background = "#ff7f7f";
}


$('body').on('keydown', 'input, select, textarea', function(e) {
    var self = $(this)
      , form = self.parents('form:eq(0)')
      , focusable
      , next
      ;
    if (e.keyCode == 13) {
        focusable = form.find('input,a,select,button,textarea').filter(':visible');
        next = focusable.eq(focusable.index(this)+1);
        if (next.length) {
            next.click();
        } else {
            next.click();
        }
        return false;
    }
});

function markQompleted(){
  location.href = '/q/';
}


</script>


<% include partials/footer %>